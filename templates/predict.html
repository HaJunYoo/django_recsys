{% extends "base.html" %}
{% load static %}

{% block main %}

<style>

.container h1 {
    font-family: "Nanum Gothic";
    font-weight: bolder;
}

.container .form-group {
    font-family: "Nanum Gothic";
}

.container label {
    font-weight: bolder;
}

</style>


<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">

    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Contents-Topic based Recommendation Results</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">

                <div>name : <span id="name"></span></div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <a class="btn btn-primary" href="/results" role="button">View DB</a>
            </div>
        </div>
    </div>
</div>

<h1 style="text-align: center; margin-top: 2rem; margin-bottom: 1rem;">Contents based Recommendation Input ğŸŠ</h1>
<hr>

<div class = "container">

<div class="container pt-5">
    <div class="row justify-content-md-center">
{#        column grid medium -> 12/4(3ë¶„í• ) number of 4#}
        <div class="col-md-6">
            <form action="" id="post-form">
                {% csrf_token %}

                <div class="form-group">
                    <label for="gender">ì„±ë³„ </label>
                    <br>
                    <select class="form-control" id = "gender"  required>
                      <option selected>ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”  (ë‚¨ì: M, ì—¬ì: F)  </option>
                      <option value="M">ë‚¨ì(M)</option>
                      <option value="F">ì—¬ì(F)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="age">ë‚˜ì´</label>
                    <input type="number" step="1" class="form-control" id="age"
                           placeholder="(ë‚˜ì´)ì–‘ì˜ ì •ìˆ˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" required>
                </div>

                <div class="form-group">
                    <label for="main_category">ì¹´í…Œê³ ë¦¬</label><br>
                    <select class="form-control" id = "main_category"  required>
                      <option selected> ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”(í•„ìˆ˜)  </option>
                      <option value="ê°€ë°©">ê°€ë°©</option>
                      <option value="ëª¨ì">ëª¨ì</option>
                      <option value="ìƒì˜">ìƒì˜</option>
                      <option value="ìŠ¤ë‹ˆì»¤ì¦ˆ">ìŠ¤ë‹ˆì»¤ì¦ˆ</option>
                      <option value="ìŠ¤ì»¤íŠ¸">ìŠ¤ì»¤íŠ¸</option>
                      <option value="ìŠ¤í¬ì¸ ê°€ë°©">ìŠ¤í¬ì¸ ê°€ë°©</option>
                      <option value="ìŠ¤í¬ì¸ ëª¨ì">ìŠ¤í¬ì¸ ëª¨ì</option>
                      <option value="ìŠ¤í¬ì¸ ì‹ ë°œ">ìŠ¤í¬ì¸ ì‹ ë°œ</option>
                      <option value="ì‹ ë°œ">ì‹ ë°œ</option>
                      <option value="ì•„ìš°í„°">ì•„ìš°í„°</option>
                      <option value="ì›í”¼ìŠ¤">ì›í”¼ìŠ¤</option>
                      <option value="í•˜ì˜">í•˜ì˜</option>
                    </select>

                </div>

                <div class="form-group">
                    <label for="coordi">ì½”ë””</label>
                    <select class="form-control" id = "coordi"  required>
                      <option selected> ì½”ë”” íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”  </option>
                      <option value="ìºì£¼ì–¼">ìºì£¼ì–¼</option>
                      <option value="ì•„ë©”ë¦¬ì¹¸ ìºì£¼ì–¼">ì•„ë©”ë¦¬ì¹¸ ìºì£¼ì–¼</option>

                      <option value="í¬ë©€">í¬ë©€</option>
                      <option value="ëŒ„ë””">ëŒ„ë””</option>

                      <option value="ë¡œë§¨í‹±">ë¡œë§¨í‹±</option>
                      <option value="ê±¸ë¦¬ì‹œ">ê±¸ë¦¬ì‹œ</option>

                      <option value="ìŠ¤íŠ¸ë¦¿">ìŠ¤íŠ¸ë¦¿</option>
                      <option value="ì‹œí¬">ì‹œí¬</option>

                      <option value="ê³¨í”„">ê³¨í”„</option>
                      <option value="ìŠ¤í¬ì¸ ">ìŠ¤í¬ì¸ </option>
                      <option value="í™ˆì›¨ì–´">í™ˆì›¨ì–´</option>
                      <option value="ë ˆíŠ¸ë¡œ">ë ˆíŠ¸ë¡œ</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="input_text">í‚¤ì›Œë“œ ì…ë ¥</label>
                    <input type="text" class="form-control" id="input_text"
                           placeholder="í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ : ì¡°ê±°ë°”ì§€, í°í‹°)" required>
                </div>

                <div class="form-group">
                    <label for="top_n">Top-N</label>
                    <input type="number" step="0.1" class="form-control" id="top_n"
                           placeholder="ì–‘ì˜ ì •ìˆ˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" required>
                </div>
                <button style ='margin-top: 2rem;' type="submit" value="Submit" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">ì œì¶œ</button>
            </form>
        </div>

    </div>
</div>

</div>

<script>

    $(document).on('submit', '#post-form',function(e){
        {# submit -> ì—°ì‡„ ë‹¤ìŒ ì´ë²¤íŠ¸ ë¬µì‚´ -> ajax ì‹¤í–‰ #}
        e.preventDefault();
        $.ajax({
            type:'POST',
            {#app = predict, reference url namespace => submit_prediction #}

            url:'{% url "predict:prediction_page" %}',
            data:{
                input_text:$('#input_text').val(),
                topn:$('#top_n').val(),
                age:$('#age').val(),
                coordi:$('#coordi').val(),
                gender:$('#gender').val(),
                main_category:$('#main_category').val(),

                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                action: 'post'
            },

            success:function(json) {
                {#form ë³´ëƒ„ì´ ì„±ê³µí•˜ë©´ ì ì€ ë‚´ìš© ì‚¬ë¼ì§#}
                document.forms["post-form"].reset();
                alert('POST Success!');

                document.getElementById("name").innerHTML = json['name']
                {#document.getElementById("img").innerHTML = json['img']#}

            },
            error : function(xhr,errmsg,err) {
                console.log(error);
            }
        });
    })

</script>

{% endblock %}